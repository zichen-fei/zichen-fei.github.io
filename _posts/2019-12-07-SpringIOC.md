---
layout: post
title: Spring中的IoC
date: 2019-12-07
tags: Java
---

### **Spring的整体架构**

![](/images/posts/Spring/a1.png)

### **IoC**

Ioc—Inversion of Control，即即控制反转，将设计好的对象交给容器控制，而不是像传统的那样在对象中直接new一个  

关键在于**谁控制谁，控制什么，为何是反转（有反转就应该有正转了），哪些方面反转了**

+ 谁控制谁：传统Java SE程序设计，直接在对象内部通过new进行创建对象，是程序主动去创建依赖对象；而IoC是有专门一个容器来创建这些对象，
即由IoC容器来控制对象的创建；是IoC 容器控制了对象

+ 控制什么：主要控制了外部资源获取（不只是对象包括文件等）

+ 为何是反转：有反转就有正转，传统应用程序是由我们自己在对象中主动控制去直接获取依赖对象，也就是正转；
而反转则是由容器来帮忙创建及注入依赖对象；因为由容器帮我们查找及注入依赖对象，对象只是被动的接受依赖对象，所以是反转

+ 哪些方面反转了：依赖对象的获取被反转了

传统程序设计如图，都是主动去创建相关对象然后再组合起来

![](/images/posts/Spring/a2.jpg)

当有了IOC/DI的容器后，在类中不再主动去创建这些对象了，如图所示:

![](/images/posts/Spring/a3.jpg)

#### **IoC的作用**

IoC不是一种技术，是一个面向对象编程的法则，它能指导我们如何设计出松耦合、更优良的程序。传统应用程序都是由我们在类内部主动创建依赖对象，
导致类与类之间高耦合，难于测试；有了IoC容器后，把创建和查找依赖对象的控制权交给了容器，由容器进行注入组合对象，
所以对象与对象之间是松散耦合，这样也方便测试，利于功能复用，更重要的是使得程序的整个体系结构变得非常灵活。

IoC很好的体现了面向对象设计法则之一，好莱坞法则：“别找我们，我们找你”；即由IoC容器帮对象找相应的依赖对象并注入，而不是由对象主动去找。

#### **DI**

DI—Dependency Injection，即依赖注入，是组件之间依赖关系由容器在运行期决定，形象的说，即由容器动态的将某个依赖关系注入到组件之中。
依赖注入的目的是为了提升组件重用的频率，并为系统搭建一个灵活、可扩展的平台。通过依赖注入机制，只需要通过简单的配置，
不需要任何代码就可指定目标需要的资源，不需要关心具体的资源来自何处，由谁实现。

关键在于**谁依赖谁，为什么需要依赖，谁注入谁，注入了什么**

+ 谁依赖于谁：是应用程序依赖于IoC容器

+ 为什么需要依赖：应用程序需要IoC容器来提供对象需要的外部资源

+ 谁注入谁：是IoC容器注入应用程序某个对象，应用程序依赖的对象

+ 注入了什么：注入某个对象所需要的外部资源（包括对象、资源、常量数据）

**DI的实现方式有：构造器注入（Constructor Injection），属性注入（Property Injection），方法注入（Method Injection）**

#### **IoC和DI的关系**

IoC和DI其实是一个意思。IoC作为率先提出的概念内涵着一部分概念，不直接，就提出了di。但他们都内涵着对方的意思。IoC是目的，DI是手段，
DI是IoC的具体功能的实现。而IoC则是DI发挥的平台和空间。所以说，IoC和DI即是相辅相成的搭档，又是殊途同归的双胞胎。他们都是良好的降低耦合的思想。



